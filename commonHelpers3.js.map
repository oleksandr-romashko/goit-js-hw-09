{"version":3,"file":"commonHelpers3.js","sources":["../src/js/03-promises.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst warningOptions = {\n  position: 'topRight',\n  messageSize: '22',\n  messageColor: '#fafafa',\n  icon: false,\n  close: false,\n  closeOnClick: false,\n  timeout: '5000',\n  pauseOnHover: true,\n  progressBar: false,\n  transitionIn: 'fadeIn',\n  transitionOut: 'fadeOut',\n};\n\nconst form = document.querySelector('.form');\nform.delay.min = 0;\nform.step.min = 0;\nform.amount.min = 1;\n\nform.addEventListener('submit', onFormSubmitForm);\n\nfunction onFormSubmitForm(event) {\n  event.preventDefault();\n\n  const {\n    delay: delayEl,\n    step: stepEl,\n    amount: amountEl,\n  } = event.currentTarget.elements;\n\n  for (let i = 0; i < amountEl.value; i++) {\n    const position = i + 1;\n    const delay = Number(delayEl.value) + stepEl.value * i;\n    createPromise(position, delay)\n      .then(({ position, delay }) => {\n        notifyMessage(`✅ Fulfilled promise ${position} in ${delay}ms`, true);\n      })\n      .catch(({ position, delay }) => {\n        notifyMessage(`❌ Rejected promise ${position} in ${delay}ms`, false);\n      });\n  }\n  event.currentTarget.reset();\n}\n\nfunction createPromise(position, delay) {\n  return new Promise((resolve, reject) => {\n    const shouldResolve = Math.random() > 0.3;\n    setTimeout(() => {\n      if (shouldResolve) {\n        resolve({ position, delay });\n      } else {\n        reject({ position, delay });\n      }\n    }, delay);\n  });\n}\n\nfunction notifyMessage(message, success) {\n  warningOptions.message = message;\n  if (success) {\n    iziToast.success({\n      ...warningOptions,\n      message,\n      backgroundColor: '#2bbe78',\n    });\n  } else {\n    iziToast.success({\n      ...warningOptions,\n      message,\n      backgroundColor: '#fd4b3f',\n    });\n  }\n}\n"],"names":["warningOptions","form","onFormSubmitForm","event","delayEl","stepEl","amountEl","i","position","delay","createPromise","notifyMessage","resolve","reject","shouldResolve","message","success","iziToast"],"mappings":"wIAGA,MAAMA,EAAiB,CACrB,SAAU,WACV,YAAa,KACb,aAAc,UACd,KAAM,GACN,MAAO,GACP,aAAc,GACd,QAAS,OACT,aAAc,GACd,YAAa,GACb,aAAc,SACd,cAAe,SACjB,EAEMC,EAAO,SAAS,cAAc,OAAO,EAC3CA,EAAK,MAAM,IAAM,EACjBA,EAAK,KAAK,IAAM,EAChBA,EAAK,OAAO,IAAM,EAElBA,EAAK,iBAAiB,SAAUC,CAAgB,EAEhD,SAASA,EAAiBC,EAAO,CAC/BA,EAAM,eAAc,EAEpB,KAAM,CACJ,MAAOC,EACP,KAAMC,EACN,OAAQC,CACZ,EAAMH,EAAM,cAAc,SAExB,QAASI,EAAI,EAAGA,EAAID,EAAS,MAAOC,IAAK,CACvC,MAAMC,EAAWD,EAAI,EACfE,EAAQ,OAAOL,EAAQ,KAAK,EAAIC,EAAO,MAAQE,EACrDG,EAAcF,EAAUC,CAAK,EAC1B,KAAK,CAAC,CAAE,SAAAD,EAAU,MAAAC,KAAY,CAC7BE,EAAc,uBAAuBH,CAAQ,OAAOC,CAAK,KAAM,EAAI,CAC3E,CAAO,EACA,MAAM,CAAC,CAAE,SAAAD,EAAU,MAAAC,KAAY,CAC9BE,EAAc,sBAAsBH,CAAQ,OAAOC,CAAK,KAAM,EAAK,CAC3E,CAAO,CACJ,CACDN,EAAM,cAAc,OACtB,CAEA,SAASO,EAAcF,EAAUC,EAAO,CACtC,OAAO,IAAI,QAAQ,CAACG,EAASC,IAAW,CACtC,MAAMC,EAAgB,KAAK,OAAM,EAAK,GACtC,WAAW,IAAM,CACXA,EACFF,EAAQ,CAAE,SAAAJ,EAAU,MAAAC,CAAK,CAAE,EAE3BI,EAAO,CAAE,SAAAL,EAAU,MAAAC,CAAK,CAAE,CAE7B,EAAEA,CAAK,CACZ,CAAG,CACH,CAEA,SAASE,EAAcI,EAASC,EAAS,CACvChB,EAAe,QAAUe,EACrBC,EACFC,EAAS,QAAQ,CACf,GAAGjB,EACH,QAAAe,EACA,gBAAiB,SACvB,CAAK,EAEDE,EAAS,QAAQ,CACf,GAAGjB,EACH,QAAAe,EACA,gBAAiB,SACvB,CAAK,CAEL"}